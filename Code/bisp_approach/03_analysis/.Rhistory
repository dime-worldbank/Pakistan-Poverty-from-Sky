library(readstata13)
# Setup
library(here)
library(tidyverse)
library(readstata13)
# Key variables
SAT_INPUT_PATH <- here('Data', 'FinalData', 'BISP', 'bisp_satellite_data.Rds')
SAT_OUTPUT_PATH <- here('Data', 'FinalData', 'BISP', 'bisp_satellite_data.csv')
BISP_INPUT_PATH <- here('Data', 'RawData', 'BISP', 'bisp_combined_plist.dta')
BISP_OUTPUT_PATH <- here('Data', 'FinalData', 'BISP', 'bisp_combined_plist.csv')
# Import
sat_df <- readRDS(SAT_INPUT_PATH)
bisp_df <- read.dta13(BISP_INPUT_PATH)
View(bisp_df)
BISP_OUTPUT_PATH <- here('Data', 'FinalData', 'BISP', 'bisp_hh_income.csv')
bisp_df %>%
select(uid, period, CQ12) %>%
mutate(period = case_when(period == 0 ~ 2011,
period == 1 ~ 2013,
period == 2 ~ 2014,
period == 3 ~ 2016
)) %>%
group_by(uid, period) %>%
summarize(hh_inc = sum(CQ12, na.rm = TRUE))
bisp_df <- bisp_df %>%
select(uid, period, CQ12) %>%
mutate(period = case_when(period == 0 ~ 2011,
period == 1 ~ 2013,
period == 2 ~ 2014,
period == 3 ~ 2016
)) %>%
group_by(uid, period) %>%
summarize(hh_inc = sum(CQ12, na.rm = TRUE))
bisp_df %>% write_csv(BISP_OUTPUT_PATH)
# 01_convert_sat_data_to_csv
#
# DESCRIPTION:
# Satellite data by household is in .rds format, while ML work will be done in
# Python. This script converts the rds data to csv for use in Python.
# Setup
library(here)
library(tidyverse)
library(readstata13)
# Key variables
SAT_INPUT_PATH <- here('Data', 'FinalData', 'BISP', 'bisp_satellite_data.Rds')
SAT_OUTPUT_PATH <- here('Data', 'FinalData', 'BISP', 'bisp_satellite_data.csv')
BISP_INPUT_PATH <- here('Data', 'RawData', 'BISP', 'bisp_combined_plist.dta')
BISP_OUTPUT_PATH <- here('Data', 'FinalData', 'BISP', 'bisp_hh_income.csv')
# Import, export satellite data
sat_df <- readRDS(SAT_INPUT_PATH)
sat_df %>% write_csv(SAT_OUTPUT_PATH)
# Import, summarize, export household income data
bisp_df <- read.dta13(BISP_INPUT_PATH)
bisp_df <- bisp_df %>%
select(uid, period, CQ12) %>%
mutate(period = case_when(period == 0 ~ 2011,
period == 1 ~ 2013,
period == 2 ~ 2014,
period == 3 ~ 2016
)) %>%
group_by(uid, period) %>%
summarize(hh_inc = sum(CQ12, na.rm = TRUE))
bisp_df %>% write_csv(BISP_OUTPUT_PATH)
